import * from "../../test"

push_scope("tableshapes")

test("tableshape type inference", fn {
    let a = { a: 100 }

    expect(typeof(a) == type({ a: number }), "Expected a to be '{a: number}'")
    expect(a is type({ a: number }), "Expected a to be '{a: number}'")
})

test("nested tableshape type inference", fn {
    let a = {
        a: { a: [1, 2, 3] }
    }

    expect(typeof(a) == type({a: {a: [number]}}), "Expected a to be '{a: {a: [number]}}'")
    expect(a is type({a: {a: [number]}}), "Expected a to be '{a: {a: [number]}}'")
})

test("multi-field tableshape type inference", fn {
    let t = {
        a: 10,
        b: "hello",
        c: true
    }

    expect(typeof(t) == type({a: number, b: string, c: bool}), "Expected t to be '{a: number, b: string, c: bool}'")
    expect(t is type({a: number, b: string, c: bool}), "Expected t to be '{a: number, b: string, c: bool}'")
})

pop_scope()