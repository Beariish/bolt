import * from core
import test

type Error = final {
    what: string
}

fn error(what: string) {
    return Error => { what: what }
}

fn div(a: number, b: number): number | Error {
    if b == 0 {
        return error("Cannot divide by 0!")
    }

    return a / b
}

let case = test.prefix("if-let")

case("union distinction", fn {
    test.expect(false, "This did not work!")
})

for i in 4 {
    let result = div(10, i)
    
    if result is Error {
        print("we got an error!:", (result as Error!).what)
    } else {
        print("There was no error!", result as number!)
    }

    if let err = result as Error {
        print("we got an error!:", err.what)
    } else if let num = result as number {
        print("we got number : )", num)
    }
}

if let result = div(10, 2) as number {
    print("We got", result)
}