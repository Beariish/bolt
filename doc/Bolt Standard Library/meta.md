# Meta
This module contains functions for interacting with the VM itself.

## Constants
```ts
meta.stack_size: number     // The size of the value stack
meta.callstack_size: number // The size of the callstack
meta.verison: string        // A string describing the version of the library
```

## Types
```ts
// In-language representation of type annotations, such that
// #anno fn t {} provides Annotation => { name: "anno", args: [:any] }
type Annotation = {
    name: string,
    args: [any]
}
```

## Functions
```ts
// Forces a garbage collection cycle. Returns the number of objects collected.
meta.gc(): number

// Marks an object as grey, stopping it from being collected next GC cycle.
meta.grey(obj: any)

// Pushes the object to the VM's temporary root stack, preventing collection until it's been popped
meta.push_root(obj: any)

// Removes the top object from the root stack.
meta.pop_root()

// Adds object to the natively referenced set, returning the number of references.
meta.add_reference(obj: any): number

// Removes a reference to `obj` from the native reference set, removing it entirely 
// if there are none left. Returns the updated number of references.
meta.remove_reference(obj: any): number

// Retruns the number of bytes currently tracked by the GC.
meta.mem_size(): number

// Retruns the memory capacity required for the GC to trigger its next cycle.
meta.next_cycle(): number

// Registers a type to the prelude, making it globally acessible. This is how 
// types like `number`, `string`, and `bool` are exposed.
meta.register_type(name: string, t: Type)

// Searches the prelude for a type by `name`, returning `null` if none are found.
meta.find_type(name: string): Type?

// Given enum `e`, returns a string representation of the entry `value`. 
// `value` must be a valid option, or a runtime error is raised.
meta.get_enum_name(e: Type, value: any): string

// Appends `path_spec` to the list of formats used when attempting to import 
// a module. `%s` is replaced with the name when searching for it.
/** Example:
    meta.add_module_path("lib/%s.bolt")
*/
meta.add_module_path(path_spec: string)

// Dymmically searches for a module and attempts to load it, returning `null` if it doesn't exist
// Returns a reference to the module's export table
meta.find_module(path: string): unsealed {}?

// Returns the number of options in a given union type.
/** Example:
    let x = meta.get_union_size(type(string | number | null))
    print(x) // 3
*/
meta.get_union_size(t: Type): number

// Extracts the `n`th type from the union `t`.
/** Example:
    let t = meta.get_union_entry(type(string | number | null), 1)
    print(t) // type(number)
*/
meta.get_union_entry(t: Type, n: number): Type

// Returns all the type annotations for binding `t`
meta.annotations(t: any): [meta.Annotation]

// Returns all field annotations for field `f` inside type `t`
meta.field_annotations(t: Type, f: any): [meta.Annotation]

// Disassembles and dumps the generated bytecode of the function `f` into a string. Mainly for VM development debugging.
meta.dump(f: fn(?): ?): string
```
